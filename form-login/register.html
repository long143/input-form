<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
<section class="vh-100" style="background-color: #eee;">
    <div class="container h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-lg-12 col-xl-11">
                <div class="card text-black" style="border-radius: 25px;">
                    <div class="card-body p-md-5">
                        <div class="row justify-content-center">
                            <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

                                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Sign up</p>

                                    <!-- Name -->
                                    <div class="d-flex flex-row align-items-center mb-4">
                                        <svg style="width: 30px;height: 30px" xmlns="http://www.w3.org/2000/svg"
                                             width="16" height="16" fill="currentColor" class="bi bi-person-circle mb-4"
                                             viewBox="0 0 16 16">
                                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                            <path fill-rule="evenodd"
                                                  d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                                        </svg>
                                        <div class="form-outline flex-fill mb-0">
                                            <input type="text" id="name" class="form-control" oninput="validate()"/>
                                            <label class="form-label" id="validate-name">Your Name</label>
                                        </div>
                                    </div>
                                    <!-- User Name -->
                                    <div class="d-flex flex-row align-items-center mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                             fill="currentColor" class="bi bi-person-square mb-4" viewBox="0 0 16 16">
                                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                                            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
                                        </svg>
                                        <div class="form-outline flex-fill mb-0">
                                            <input type="text" id="username" class="form-control" oninput="validate()"/>
                                            <label class="form-label" id="validate-username" >Your UserName</label>
                                        </div>
                                    </div>

                                    <div class="d-flex flex-row align-items-center mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                             fill="currentColor" class="bi bi-envelope mb-4" viewBox="0 0 16 16">
                                            <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z"/>
                                        </svg>
                                        <div class="form-outline flex-fill mb-0">
                                            <input type="email" id="email" class="form-control" oninput="validate()"/>
                                            <label class="form-label" id="validate-email" >Your Email</label>
                                        </div>
                                    </div>
<!--                                PassWord-->
                                    <div class="d-flex flex-row align-items-center mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                             fill="currentColor" class="bi bi-eye-fill mb-4" viewBox="0 0 16 16">
                                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                                            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                                        </svg>
                                        <div class="form-outline flex-fill mb-0">
                                            <input type="password" id="password" class="form-control" oninput="validate()"/>
                                            <label class="form-label" id="validate-password" >Password</label>
                                        </div>
                                    </div>
<!--                                RePassword-->
                                    <div class="d-flex flex-row align-items-center mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
                                             fill="currentColor" class="bi bi-eye-slash-fill mb-4" viewBox="0 0 16 16">
                                            <path d="m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"/>
                                            <path d="M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"/>
                                        </svg>
                                        <div class="form-outline flex-fill mb-0">
                                            <input type="password" id="re_password" class="form-control" oninput="validate()"/>
                                            <label class="form-label" id="validate-repassword" >Repeat your password</label>
                                        </div>
                                    </div>
                                    <div class="form-check d-flex justify-content-center mb-5">
                                        <input class="form-check-input me-2" type="checkbox" value=""
                                               id="form2Example3c"/>
                                        <label class="form-check-label">
                                            I agree all statements in <a href="#!">Terms of service</a>
                                        </label>
                                    </div>
                                    <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                                        <button id="btn-register" type="button" onclick=register() class="btn btn-primary btn-lg">Register</button>
                                    </div>
                            </div>
                            <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">

                                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/draw1.webp"
                                     class="img-fluid" alt="Sample image">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<script>
    let name;
    let username;
    let email;
    let password;
    let rePassword;
    let checkValidate = false;
    let listUser = JSON.parse(localStorage.getItem("userList"))
    if (listUser == null){
        listUser= [];
        id = 1;
    } else {
        id  = listUser[listUser.length-1].id + 1
    }

    function validate(){
        name = document.getElementById('name').value;
        username = document.getElementById('username').value;
        email = document.getElementById('email').value
        password = document.getElementById('password').value
        rePassword = document.getElementById('re_password').value;
        if (name.trim() ===''){
            document.getElementById('validate-name').innerHTML = `<label style="color: red"> The name is required!</label>`
            checkValidate = false;
            return;
        } else {
            document.getElementById('validate-name').innerHTML = ''
            checkValidate = true
        }

        if (username.trim() ===''){
            document.getElementById('validate-username').innerHTML = `<label style="color: red"> The username is required!</label>`
            checkValidate = false
        } else {
            for (let i = 0; i < listUser.length; i++) {
                if (username === listUser[i].username){
                    checkValidate = false
                    document.getElementById('validate-username').innerHTML = `<label style="color: red"> The username is existed!</label>`
                    return;
                }
            }
            document.getElementById('validate-username').innerHTML = '';
            checkValidate = true
        }

        if (email.trim() ===''){
            document.getElementById('validate-email').innerHTML = `<label style="color: red"> The email is required!</label>`
            checkValidate = false
        } else {
            if (!ValidateEmail(email)){
                document.getElementById('validate-email').innerHTML = `<label style="color: red"> The email invalid!</label>`
                checkValidate = true
            } else {
                for (let i = 0; i < listUser.length; i++) {
                    if (email === listUser[i].email){
                        checkValidate = false
                        document.getElementById('validate-email').innerHTML = `<label style="color: red"> The email is existed!</label>`
                        return;
                    }
                }
                document.getElementById('validate-email').innerHTML = ''
                checkValidate = true
            }
        }

        if (password.trim() === ""){
            checkValidate = false
            document.getElementById('validate-password').innerHTML = `<label style="color: red"> The password is required!</label>`
            return;
        } else {
            document.getElementById('validate-password').innerHTML = ""
            checkValidate = true

        }
        if (rePassword !== password ){
            checkValidate = false
            document.getElementById("validate-repassword").innerHTML=`<label style="color: red"> The repeat password is not match!</label>`
        } else {
            document.getElementById("validate-repassword").innerHTML=`<label style="color: green"> The repeat password is successfully!</label>`
            checkValidate = true
        }
        btnButton();
    }
    function btnButton() {
        if (checkValidate === true){
            document.getElementById('btn-register').disabled = false
        } else {
            document.getElementById('btn-register').disabled = true
        }
    }
    function register(){
        if (checkValidate){
            let user = new User(id,name,username,email,password)
            listUser.push(user);
            localStorage.setItem("userList",JSON.stringify(listUser));
            location.href = "login.html"
        }
    }

    function ValidateEmail(mail)
    {
        if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail))
        {
            return (true)
        }
        return (false)
    }


</script>
</body>
</html>